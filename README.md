# Лабораторная работа №7

## Тема: "***<u>Асинхронное программирование</u>***"

### Цель:

- Знакомство с асинхронным программированием;
- Получение практических навыков в параллельной обработке данных;
- Получение практических навыков в синхронизации потоков;

### Порядок выполнения работы:

- Ознакомиться с теоретическим материалом

- Реализовать задание в соответствии с вариантом (Вариант 17)

- Отчитаться по выполненной работе путём демонстрации работающей программы на тестовых наборах данных (как подготовленных самостоятельно, так и предложенных преподавателем) и ответов на вопросы преподавателя (как из числа контрольных, так и по реализации программы).

### Требования к программе:

Модифицируйте вашу лабораторную работу №6 следующим образом:

- Должно быть реализовано три потока:
  
  - Поток, который осуществляет передвижение NPC на определенное расстояние (см. таблицу), а также определяет, что два NPC находятся на расстоянии убийства (см. таблицу). Если два NPC вступили в «бой», то он создает задачу для потока, осуществляющего бои.
  
  - Поток, который осуществляет бои. Если один npc может убивать другой, то каждый npc «кидает 6-гранный кубик» определяя силу атаки и силу защиты (соответственно). Если сила атаки больше, чем сила защиты – то происходит убийство.
  
  - Мертвые npc не передвигаются (у нас тут без некромантов).
  
  - Живые npc не могут покинуть карту (размер задается через константы, например 100 x 100)
  
  - Основной поток раз в секунду печатает карту. Мертвые npc на карте не отображаются.

- Осуществить контроль доступа к разделяемым ресурсов с помощью std::shared_lock и std::lock_guard

- Осуществить контроль к потоку вывода std::cout через std::lock_guard

- Потоки могут запускаться как std::thread с использованием лямбда функций или функторов (классов с перегруженным оператором operator())

- Вначале игры должно создаваться 50 npc в случайных локациях.

- Игра должна останавливаться через 30 секунд и выводить на экран список выживших

## Условие задачи:

| Кто нагоняет | Расстояние хода | Расстояние убийства |
|:------------:|:---------------:|:-------------------:|
| Странствующий рыцарь | 30 | 10 |
| Разбойник | 10 | 10  |
| Эльф | 10 | 50  |

---

## Структура проекта

```
lab_7
├── CMakeLists.txt
├── main.cpp
├── README.md
│
├── include/
│ ├── npc.h
│ ├── rogue.h
│ ├── knight_errant.h
│ ├── elf.h
│ ├── factory.h
│ ├── arena.h
│ ├── visitor.h
│ ├── combat_visitor.h
│ ├── observer.h
│ ├── console_observer.h
│ └── file_observer.h
│
├── src/
│ ├── npc.cpp
│ ├── rogue.cpp
│ ├── knight_errant.cpp
│ ├── elf.cpp
│ ├── factory.cpp
│ ├── arena.cpp
│ └── combat_visitor.cpp
│
└── tests/
├── test_npc.cpp
├── test_factory.cpp
├── test_arena.cpp
├── test_combat.cpp
├── test_file_loading.cpp
└── test_data_npcs.txt
```

## Сборка и запуск проекта

**Сборка:**

```bash
# Создание директории для сборки
mkdir build
cd build

# Конфигурация проекта
cmake ..

# Сборка проекта
cmake --build .
```

**Запуск:**

```bash
./lab_6.exe
```

## Запуск тестов:

```bash
# Из директории build/tasks/Laboratory_6
./test_[name]

